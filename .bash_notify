#!/bin/sh

####################################################################################
# Bashly 	: 0.1.0
# Copyright	: 2014, MIT
# Author	: Andr√© Lademann <vergissberlin@googlemail.com>
# Repository: https://github.com/vergissberlin/bashlight
####################################################################################

####################################################################################
## OS X

readonly VOICE_RATE=280
readonly VOICE_TYPE="Bruce"
readonly SOUND_RATE=2
readonly SOUND_TYPE="Submarine"

# Available sounds on OS X
# Basso.aiff	Morse.aiff
# Blow.aiff		Ping.aiff
# Bottle.aiff	Pop.aiff
# Frog.aiff		Purr.aiff
# Funk.aiff		Sosumi.aiff
# Glass.aiff	Submarine.aiff
# Hero.aiff		Tink.aiff


### sound
function blPlay() {
	if type "afplay" >/dev/null 2>&1 ; then
		if [ -f "/System/Library/Sounds/$1.aiff" ]; then
			afplay -r $SOUND_RATE -v 2 "/System/Library/Sounds/$1.aiff";
		fi
	fi
}

### speak
function blSay() {
	if type "say" >/dev/null 2>&1 ; then
		say -r $VOICE_RATE -v $VOICE_TYPE "$@." 2> /dev/null
	fi
}

### notification
if type "osascript" >/dev/null 2>&1 ; then
	function alert() {
		osascript -e "display notification \"$1\" with title \"$2\"";
	}
elif type "notify-send" >/dev/null 2>&1 ; then
	alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'
fi



# run on init
blSay "Welcome back $(whoami)";
blSay "Bash light terminal open";
blPlay $SOUND_TYPE;
